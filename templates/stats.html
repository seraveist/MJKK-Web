{% extends "base.html" %}
{% block content %}

<div id="loading" class="loading-overlay" style="display: none;">
  <div class="spinner"></div>
</div>

<div class="stats-container">
  <h1>ğŸ“‘ ë§ˆìê¹Œê¹Œ ê°œì¸ í†µê³„</h1>
  <div class="season-tabs">
    {% for s in available_seasons %}
      <button class="tab {% if s|string == season|string %}active{% endif %}" data-season="{{ s }}">
        ì‹œì¦Œ {{ s }}
      </button>
    {% endfor %}
    <button class="tab {% if season == 'all' %}active{% endif %}" data-season="all">ì „ì²´</button>
  </div>

  <div class="separator"></div>

  <label for="playerSelect">í”Œë ˆì´ì–´ :</label>
  <select id="playerSelect"></select>

  <div class="separator"></div>
  
  <h2>ìµœê·¼ ìˆœìœ„</h2>
  <!-- ê·¸ë˜í”„ ì»¨í…Œì´ë„ˆ -->
  <div class="graph-container">
    <canvas id="rankChart"></canvas>
  </div>

  <div class="graph-controls">
    <button class="graph-btn" data-count="10">10êµ­</button>
    <button class="graph-btn" data-count="50">50êµ­</button>
    <button class="graph-btn" data-count="100">100êµ­</button>
  </div>
  <div class="separator"></div>
  <h2>ì‹œì¦Œ í†µê³„</h2>
  <!-- í†µê³„ í…Œì´ë¸” -->
  <table id="statsTable">
    <thead>
      <tr><th>í•­ëª©</th><th>ê°’</th></tr>
    </thead>
    <tbody></tbody>
  </table>
  <div class="separator"></div>
  <!-- ì—­ ë‹¬ì„± ë‚´ì—­ -->
  <h2>ì—­ ë‹¬ì„± ë‚´ì—­</h2>
  <table id="yakuTable">
    <thead>
      <tr>
        <th>ì—­ ì¢…ë¥˜</th>
        <th>ë‹¬ì„± íšŸìˆ˜</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
  window.config = {
    season: "{{ season }}",
    playerName: "{{ player_name|default('') }}"
  };
</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script type="module" src="{{ url_for('static', filename='js/stats.js') }}"></script>
{% endblock %}
